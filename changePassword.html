<?php
    session_start();

    if(isset($_SESSION['pfp'])){
        $pfp = $_SESSION['pfp'];
    }
    if(isset($_SESSION['group_type'])){
        $group_type = $_SESSION['group_type'];
    }
?>
<!DOCTYPE html>
<html lang="el">
    <head>
        <link href="styles/header.css" rel="stylesheet" type="text/css">
        <link href="styles/footer.css" rel="stylesheet" type="text/css">
        <link href="styles/changePassword.css" rel="stylesheet" type="text/css">
        <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100;200;300;400;500;600;700;800;900&display=swap" rel="stylesheet">
        <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
        <meta name="author" content="Αργυρός Κωνσταντίνος">
        <meta name="description" content="Επίσημη σελίδα πληροφοριών για πρακτική άσκηση Erasmus">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta charset="utf-8"/>
        <title>Edit Profile</title>
    </head>
    <body>

        <!--Topbar Navigation Code-->
        <div class="header" id="header">
            <div class="header-container">
                <a class="logo" href="index.html"><img src="./media/photos/logo.png"></a>

                <div class="header-middle">
                    <a href="index.html">Αρχική</a>
                    <a href="more.html">Περισσότερα</a>
                    <a href="reqs.html">Προϋποθέσεις</a>
                    <?php
                        if(isset($_SESSION['group_type'])){
                            echo '<a href="application.html">Αίτηση</a>';
                            if($group_type == "administrator"){
                            echo '<a href="admin.html">Διαχείριση</a>';
                            }
                        }
                    ?>
                </div>
                <div class="header-right">
                    <div class="seperator"></div>
                    <?php
                        if(isset($_SESSION['pfp'])){
                            echo '<a class="pfp" href="profile.html"><img src="';
                            echo $pfp.'"></a>';
                        }
                        else{
                            echo '<a class="signup" href="sign-up.html">Εγγραφή</a>';
                            echo '<a class="login" href="login.html">Σύνδεση</a>';
                        }
                    ?>
                    <a class="language-button-gr"><img src="media/photos/gr-icon.jpg"></a>
                    <a class="language-button-en"><img src="media/photos/en-icon.jpg"></a>
                    </label>
                    
                </div>
            </div>
        </div>
        <!--Topbar Navigation Code-->
        
        <div class="header-content">
            <div class="welcome1">
                <div class="content">
                    <div class="text">
                        Αλλαγή Κωδικού
                    </div>
                    <form name="newPasswordForm" id="newPasswordForm" action="scripts/changePassword.php" method="post" oninput="formCheck()">
                        <p class="smaller">Τρέχων Κωδικός</p>
                        <div class="field">
                            <input name="currentPassword" id="currentPassword" type="password" class="input" placeholder="Κωδικός Πρόσβασης" required oninput="currentPasswordCheck()">
                        </div>

                        <p class="smaller">Νέος Κωδικός</p>
                        <div class="field">
                            <input name="newPassword" id="newPassword" type="password" class="input" placeholder="Κωδικός Πρόσβασης" required oninput="newPasswordCheck()">
                        </div>
                        <span name="newPasswordSpan" id="newPasswordSpan" class="field-span"><br></span>

                        <p class="smaller">Επιβεβαίωση Νέου Κωδικού</p>
                        <div class="field">
                            <input name="confirm" id="confirm" type="password" class="input" placeholder="Επιβεβαίωση Κωδικού Πρόσβασης" required oninput="newPasswordCheck()">
                        </div>
                        <span name="confirmSpan" id="confirmSpan" class="field-span"><br></span>

                        <div name="gap" id="gap" class="forgot-pass"></div> <!--For the gap -->
                        <?php
                            if(isset($_SESSION["wrongCredentials"])){
                                echo '<span style="color:red">'.$_SESSION["wrongCredentials"].'</span>';
                                unset($_SESSION['wrongCredentials']);
                            }
                            else if(isset($_SESSION["passwordUpdated"])){
                                echo '<span style="color:green">'.$_SESSION["passwordUpdated"].'</span>';
                                unset($_SESSION['passwordUpdated']);
                            }
                        ?>
                        <input name="submit" id="submit" type="submit" class="form-button-disabled" value="Ενημέρωση Κωδικού"></input>
                    </form>
                </div>
            </div>
        </div>

        <!--Footer Code-->
        <div class="footer">
            <ul class="socials">
                <li><a href="https://www.facebook.com/groups/erasmus.youthinaction/?locale=el_GR" class="fa fa-facebook"></a></li>
                <li><a href="https://twitter.com/EUErasmusPlus" class="fa fa-twitter"></a></li>
                <li><a href="https://www.instagram.com/erasmusplusprojects/?hl=el" class="fa fa-instagram"></a></li>
                <li><a href="https://www.youtube.com/@europeanparliament" class="fa fa-youtube"></a></li>
                <li><a href="https://www.reddit.com/r/Erasmus/" class="fa fa-reddit"></a></li>
                <li><a href="https://www.linkedin.com/company/meterasmusplus/" class="fa fa-linkedin"></a></li>
            </ul>
            <section class="footer-logo">
                <a href="https://commission.europa.eu/legal-notice_en">ERASMUS</a> 
            </section>
            <section class="footer-copyright">
                <a href="https://commission.europa.eu/legal-notice_en">Copyright © 2023 Erasmus, Inc.</a> 
                <!--to type C press alt + 0 1 6 9 from numpad-->
            </section>
        </div>
        <!--Footer Code-->
        
    </body>
    <script src="./scripts/changePasswordChecks.js"></script>
    <script src="scripts/stickyHeader.js"></script>     
</html>